---
import Layout from "../layouts/Layout.astro"
import Header from "../components/Header.astro"
import getCoupons from "../utils/getCoupons"
import CouponCard from "../components/CouponCard.astro"
import generateCode from "../utils/generateQrCodes"

const coupons = await getCoupons()
// coupons.forEach(async (coupon) => {
// 	await generateCode(coupon.code)
// })

// console.log(code)
---

<Layout title="BKuponger">
	<main class="bg-bgBlue min-h-screen grid grid-cols-1 grid-rows-[auto_1fr]">
		<Header />
		<div class="flex flex-col items-center justify-start gap-5 px-8">
			{
				coupons.splice(0, 1).map((coupon) => {
					return <CouponCard {...coupon} />
				})
			}
		</div>
	</main>
</Layout>
